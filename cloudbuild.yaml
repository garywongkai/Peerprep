steps:
  - name: "gcr.io/cloud-builders/npm"
    entrypoint: npm
    args: ["build", "create-env"]
    env:
      - "REACT_APP_FIREBASE_API_KEY=${_REACT_APP_FIREBASE_API_KEY}"
      - "REACT_APP_FIREBASE_AUTH_DOMAIN=${_REACT_APP_FIREBASE_AUTH_DOMAIN}"
      - "REACT_APP_FIREBASE_DATABASE_URL=${_REACT_APP_FIREBASE_DATABASE_URL}"
      - "REACT_APP_FIREBASE_PROJECT_ID=${_REACT_APP_FIREBASE_PROJECT_ID}"
      - "REACT_APP_FIREBASE_STORAGE_BUCKET=${_REACT_APP_FIREBASE_STORAGE_BUCKET}"
      - "REACT_APP_FIREBASE_MESSAGING_SENDER_ID=${_REACT_APP_FIREBASE_MESSAGING_SENDER_ID}"
      - "REACT_APP_FIREBASE_APP_ID=${_REACT_APP_FIREBASE_APP_ID}"
      - "REACT_APP_FIREBASE_MEASUREMENT_ID=${_REACT_APP_FIREBASE_MEASUREMENT_ID}"
  - name: "gcr.io/cloud-builders/docker
    entrypoint: docker
    args: ["build", "-t", "gcr.io/peerprep-5a1fa/github.com/garywongkai/peerprep:9703a4e7a8ee8c2116b22844102ea2f09e307bca", "."]
timeout: "1600s"
options:
  logging: CLOUD_LOGGING_ONLY
